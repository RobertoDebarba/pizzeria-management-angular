CREATE TABLE PRODUCTS (
    ID INT PRIMARY KEY,
    NAME VARCHAR(50) NOT NULL,
    PRICE FLOAT(6,2) NOT NULL
);

CREATE TABLE CITIES(
	ID INT PRIMARY KEY,
	NAME VARCHAR(75) NOT NULL
);

CREATE TABLE NEIGHBORHOODS(
	ID INT PRIMARY KEY,
	NAME VARCHAR(75) NOT NULL,
	CITY INT NOT NULL,

    FOREIGN KEY (CITY)
		REFERENCES CITY(ID)
);

CREATE TABLE ADDRESSES(
	ID INT PRIMARY KEY,
    PLACE VARCHAR(75) NOT NULL,
    ZIPCODE VARCHAR(9) NOT NULL,
    NEIGHBORHOOD INT NOT NULL,

    FOREIGN KEY (NEIGHBORHOOD)
		REFERENCES NEIGHBORHOOD(ID)
);

CREATE TABLE CLIENTS (
    ID INT PRIMARY KEY,
    CPF VARCHAR(14) NOT NULL,
    NAME VARCHAR(50) NOT NULL,
    TELEPHONE VARCHAR(14) NOT NULL,
    CELLPHONE VARCHAR(15) NOT NULL,
    NUMBER INT NOT NULL,
    ADDRESS INT NOT NULL,
    INFO VARCHAR(75),

    FOREIGN KEY(ADDRESS)
        REFERENCES ADDRESS(ID)
);

CREATE TABLE STATUS (
    ID INT PRIMARY KEY,
    DESCRIPTION VARCHAR(25) NOT NULL
);

CREATE TABLE ORDERS (
    ID INT PRIMARY KEY,
    DATE DATETIME NOT NULL,
    STATUS INT NOT NULL,
    CLIENT INT NOT NULL,

    FOREIGN KEY(CLIENT)
        REFERENCES CLIENT(ID),

    FOREIGN KEY(STATUS)
        REFERENCES STATUS(ID)
);

CREATE TABLE PRODUCTS_HISTORY(
    ID INT PRIMARY KEY,
    ID_PRODUCT INT NOT NULL,
    DATA DATETIME NOT NULL,
    PRICE FLOAT(6,2) NOT NULL,

    FOREIGN KEY(ID_PRODUCT)
        REFERENCES PRODUCT(ID)
);

CREATE TABLE PRODUCTS_ORDERS(
    ID_PRODUCT INT,
    ID_ORDER INT,
    ID_PRODUCT_HISTORY INT NOT NULL,
    AMOUNT INT NOT NULL,

    PRIMARY KEY (ID_PRODUCT, ID_ORDER),

    FOREIGN KEY(ID_PRODUCT)
        REFERENCES PRODUCT(ID),

    FOREIGN KEY(ID_ORDER)
        REFERENCES ORDERS(ID),

    FOREIGN KEY(ID_PRODUCT_HISTORY)
        REFERENCES PRODUCT_HISTORY(ID)
);

INSERT INTO STATUS VALUES (1, 'PENDING');
INSERT INTO STATUS VALUES (2, 'DONE');
INSERT INTO STATUS VALUES (3, 'CANCELED');

INSERT INTO CITY VALUES (1, 'Blumenau');
INSERT INTO CITY VALUES (2, 'Gaspar');
INSERT INTO CITY VALUES (3, 'Timbó');
INSERT INTO CITY VALUES (4, 'Brusque');
INSERT INTO CITY VALUES (5, 'Indaial');

INSERT INTO PRODUCT VALUES (1, 'Pizza 4 Queijos', 20.5);
INSERT INTO PRODUCT VALUES (2, 'Pizza Calabresa', 22.5);
INSERT INTO PRODUCT VALUES (3, 'Pizza Margherita', 18);
INSERT INTO PRODUCT VALUES (4, 'Pizza à moda da casa', 25);
INSERT INTO PRODUCT VALUES (5, 'Coca-Cola 500ml', 8.5);
INSERT INTO PRODUCT VALUES (6, 'Guaraná 500ml', 7.5);

INSERT INTO NEIGHBORHOOD VALUES (1, 'Jardim Blumenau', 1);
INSERT INTO NEIGHBORHOOD VALUES (2, 'Garcia', 1);
INSERT INTO NEIGHBORHOOD VALUES (3, 'Ponta Aguda', 1);
INSERT INTO NEIGHBORHOOD VALUES (4, 'Centro', 2);
INSERT INTO NEIGHBORHOOD VALUES (5, 'Santa Felicidade', 2);
INSERT INTO NEIGHBORHOOD VALUES (6, 'Vila Formosa', 3);
INSERT INTO NEIGHBORHOOD VALUES (7, 'Ipanema', 3);
INSERT INTO NEIGHBORHOOD VALUES (8, 'Madalena', 3);
INSERT INTO NEIGHBORHOOD VALUES (9, 'Nossa Senhora', 4);
INSERT INTO NEIGHBORHOOD VALUES (10, 'Centro', 5);

INSERT INTO ADDRESS VALUES (1, 'Rua Egito', '88010-020', 7);
INSERT INTO ADDRESS VALUES (2, 'Rua Argentina', '80050-000', 1);
INSERT INTO ADDRESS VALUES (3, 'Rua Alemanha', '89010-540', 5);
INSERT INTO ADDRESS VALUES (4, 'Rua Jerusalém', '81050-670', 8);
INSERT INTO ADDRESS VALUES (5, 'Rua Amsterdã', '87890-080', 10);
INSERT INTO ADDRESS VALUES (6, 'Avenida Castelo Branco', '85580-010', 3);

INSERT INTO CLIENT VALUES (1, '111.111.111-11', 'Roberto Luiz Debarba', '(47) 3034-4331', '(47) 99944-5511', 574, 1, '');
INSERT INTO CLIENT VALUES (2, '222.222.222-22', 'Matheus Adriano Pereira', '(47) 3322-7431', '(47) 99176-9834', 999, 5, '');
INSERT INTO CLIENT VALUES (3, '333.333.333-33', 'Matheus Eduardo Hoeltgebaum Pereira', '(47) 3089-4331', '(47) 99887-0921', 107, 2, '');

INSERT INTO ORDERS VALUES (1, '2017/02/05', 1, 1);
INSERT INTO ORDERS VALUES (2, '2017/03/05', 3, 2);
INSERT INTO ORDERS VALUES (3, '2017/04/10', 2, 1);
INSERT INTO ORDERS VALUES (4, '2017/04/07', 3, 3);
INSERT INTO ORDERS VALUES (5, '2017/03/11', 1, 3);
INSERT INTO ORDERS VALUES (6, '2017/04/11', 2, 2);

INSERT INTO PRODUCT_HISTORY VALUES (1, 1, '2016/07/23', 14);
INSERT INTO PRODUCT_HISTORY VALUES (2, 2, '2016/08/11', 15);
INSERT INTO PRODUCT_HISTORY VALUES (3, 4, '2016/12/12', 18.5);
INSERT INTO PRODUCT_HISTORY VALUES (4, 3, '2017/02/17', 22.5);
INSERT INTO PRODUCT_HISTORY VALUES (5, 2, '2016/05/22', 37.5);
INSERT INTO PRODUCT_HISTORY VALUES (6, 6, '2017/03/04', 2.5);
INSERT INTO PRODUCT_HISTORY VALUES (7, 1, '2016/12/16', 19.5);
INSERT INTO PRODUCT_HISTORY VALUES (8, 3, '2016/09/22', 23.5);
INSERT INTO PRODUCT_HISTORY VALUES (9, 6, '2017/04/18', 10.5);
INSERT INTO PRODUCT_HISTORY VALUES (10, 5, '2017/02/25', 3.5);
INSERT INTO PRODUCT_HISTORY VALUES (11, 5, '2016/10/27', 5.5);
INSERT INTO PRODUCT_HISTORY VALUES (12, 4, '2017/01/14', 9.5);

INSERT INTO PRODUCT_ORDER VALUES (1, 1, 1, 2);
INSERT INTO PRODUCT_ORDER VALUES (2, 1, 5, 1);
INSERT INTO PRODUCT_ORDER VALUES (5, 1, 11, 5);
INSERT INTO PRODUCT_ORDER VALUES (6, 2, 6, 2);
INSERT INTO PRODUCT_ORDER VALUES (3, 3, 4, 1);
INSERT INTO PRODUCT_ORDER VALUES (4, 3, 3, 1);
INSERT INTO PRODUCT_ORDER VALUES (6, 4, 9, 2);
INSERT INTO PRODUCT_ORDER VALUES (1, 5, 7, 4);
INSERT INTO PRODUCT_ORDER VALUES (6, 5, 9, 10);
INSERT INTO PRODUCT_ORDER VALUES (5, 6, 10, 3);